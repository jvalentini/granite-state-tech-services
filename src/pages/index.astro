---
import BaseLayout from '../layouts/BaseLayout.astro';
import BookingEmbed from '../components/BookingEmbed.astro';
import { getCollection } from 'astro:content';
import { BOOKING_URL } from '../consts';

const posts = (await getCollection('blog'))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .slice(0, 3);
---
<BaseLayout
  title="Granite State Tech Services"
  description="AI workshops, SEO strategy, and websites that convert for New Hampshire businesses."
>
  <section class="hero">
    <p class="eyebrow">New Hampshire • Conversion-focused • Results-driven</p>
    <h1>Turn your website into<br>a booking machine.</h1>
    <p class="hero-subhead">
      AI training, local SEO, and conversion websites for NH service businesses
      — attorneys, contractors, healthcare practices — that need more booked
      appointments, not more vanity metrics.
    </p>
    <a class="btn btn-primary btn-xl" href={BOOKING_URL}>Book your free 45-min strategy call</a>
  </section>

  <section class="audience">
    <p class="eyebrow">Who this is for</p>
    <p class="audience-lead">Built for NH service businesses that live and die by booked appointments:</p>
    <ul class="audience-list">
      <li>Attorneys &amp; law firms</li>
      <li>Contractors &amp; trades</li>
      <li>Healthcare practices</li>
      <li>Consultants &amp; advisors</li>
    </ul>
  </section>

  <section class="narrative">
    <div class="story-card surface">
      <h2>The problem with most agencies</h2>
      <p>
        They sell you on vanity metrics. "We increased your traffic by 200%!" sounds great in a Zoom call.
        But when your phone still isn't ringing and your calendar stays empty, what good are those numbers?
      </p>
      <p>
        You don't need more traffic. You need more consultations. More signed contracts. More revenue.
      </p>
    </div>

    <div class="story-card surface highlight">
      <h2>What we do differently</h2>
      <p>
        Every engagement optimizes for one metric: <strong>booked consultations per month</strong>.
        That's it. If a tactic doesn't drive bookings, we don't do it.
      </p>
      <div class="approach">
        <div class="approach-item">
          <strong>AI Workshops</strong>
          <p>Train your team on tools that free up 8+ hours per week. That time goes to revenue-generating work.</p>
        </div>
        <div class="approach-item">
          <strong>Local SEO</strong>
          <p>Rank for searches that convert in NH. "AI consultant Manchester NH" beats "AI news" every time.</p>
        </div>
        <div class="approach-item">
          <strong>Conversion Websites</strong>
          <p>Fast sites with clear CTAs. Booking widgets, not buried contact forms. Speed matters—every 100ms costs conversions.</p>
        </div>
      </div>
    </div>
  </section>

  <section class="trust">
    <h2>Why work with us</h2>
    <div class="card-grid">
      <div class="stat-card surface">
        <span class="stat-number">50+</span>
        <span class="stat-label">Workshops delivered</span>
      </div>
      <div class="stat-card surface">
        <span class="stat-number">NH</span>
        <span class="stat-label">Based &amp; founder-operated</span>
      </div>
      <div class="stat-card surface">
        <span class="stat-number">&lt; 24hr</span>
        <span class="stat-label">Response time</span>
      </div>
    </div>
    <blockquote class="testimonial">
      <p>"Placeholder — swap with real client testimonial when available."</p>
      <cite>— Client Name, Company</cite>
    </blockquote>
  </section>

  <section class="results">
    <h2>What to expect</h2>
    <ul class="list">
      <li><span>→</span> More booked consultations within 90 days</li>
      <li><span>→</span> Page 1 rankings for your local service keywords</li>
      <li><span>→</span> A website that loads fast and converts visitors into calls</li>
    </ul>
  </section>

  <section class="services">
    <h2>Choose your starting point</h2>
    <div class="card-grid">
      <article class="card">
        <h3>Start with AI Training</h3>
        <p>Your team learns ChatGPT, Claude, and automation in a hands-on workshop. Leave with workflows you'll use Monday.</p>
        <a class="btn btn-ghost" href="/ai-workshops">See workshop formats →</a>
      </article>
      <article class="card">
        <h3>Start with SEO</h3>
        <p>Get found when locals search for your services. Technical audits, Google Business optimization, and content that ranks — focused on keywords that drive bookings, not blog traffic.</p>
        <a class="btn btn-ghost" href="/seo">View SEO services →</a>
      </article>
      <article class="card">
        <h3>Start with a Website</h3>
        <p>A fast, modern site with booking built in. No contact form graveyards — visitors see availability and schedule in under 60 seconds.</p>
        <a class="btn btn-ghost" href={BOOKING_URL}>Start a web project →</a>
      </article>
    </div>
  </section>

  <section class="blog">
    <h2>Insights from the field</h2>
    <div class="card-grid">
      {posts.map((post) => (
        <article class="card">
          <p class="eyebrow">{post.data.tags?.[0] ?? 'Article'}</p>
          <h3>{post.data.title}</h3>
          <p>{post.data.description}</p>
          <a class="btn btn-ghost" href={`/blog/${post.slug}`}>Read more →</a>
        </article>
      ))}
    </div>
    <p class="blog-cta">Want results like these? <a href={BOOKING_URL}>Book a free strategy call</a></p>
  </section>

  <section class="final-cta surface">
    <div>
      <h2>Let's get your phone ringing.</h2>
      <p>
        Book a 45-minute strategy call. I'll assess your current conversion path, show you where you're
        losing leads, and give you three clear options to fix it.
      </p>
      <p class="guarantee">
        No pitch deck. No upselling. Just honest analysis and a clear recommendation.
      </p>
      <a class="btn btn-primary btn-xl" href={BOOKING_URL}>Schedule your call</a>
    </div>
    <BookingEmbed />
  </section>
</BaseLayout>

<style>
  .btn-xl {
    padding: 1.2rem 2.4rem;
    font-size: 1.1rem;
  }

  .hero {
    text-align: center;
    padding: var(--space-3xl) 0;
    margin: var(--space-3xl) 0;
    display: flex;
    flex-direction: column;
    gap: var(--space-xl);
    align-items: center;
  }

  .hero-subhead {
    max-width: 640px;
    font-size: 1.1rem;
    line-height: 1.7;
    color: var(--text-dim);
  }

  .audience {
    text-align: center;
    margin: 0 0 var(--space-3xl);
  }

  .audience-lead {
    font-size: 1.1rem;
    margin: var(--space-md) 0 var(--space-lg);
  }

  .audience-list {
    list-style: none;
    padding: 0;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: var(--space-sm) var(--space-xl);
    font-size: 1rem;
    color: var(--text-dim);
  }

  .audience-list li::before {
    content: "✓ ";
    color: var(--accent-secondary-strong);
    font-weight: 700;
  }

  .narrative {
    display: flex;
    flex-direction: column;
    gap: var(--space-2xl);
    margin: var(--space-3xl) 0;
  }

  .story-card {
    padding: var(--space-2xl);
    max-width: 900px;
    margin: 0 auto;
  }

  .story-card h2 {
    margin-bottom: var(--space-lg);
  }

  .story-card p {
    font-size: 1.1rem;
    line-height: 1.7;
  }

  .highlight {
    background: linear-gradient(135deg, var(--accent) 0%, var(--accent-strong) 100%);
    color: white;
  }

  .highlight h2,
  .highlight p,
  .highlight strong {
    color: white;
  }

  .approach {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-xl);
    margin-top: var(--space-xl);
  }

  .approach-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
  }

  .approach-item strong {
    font-size: 1.1rem;
  }

  .approach-item p {
    font-size: 0.95rem;
    line-height: 1.6;
    opacity: 0.95;
  }

  .trust {
    margin: var(--space-3xl) 0;
    text-align: center;
  }

  .trust h2 {
    margin-bottom: var(--space-2xl);
  }

  .stat-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-xl);
  }

  .stat-number {
    font-family: var(--font-heading);
    font-size: 2rem;
    font-weight: 700;
    color: var(--accent-secondary-strong);
  }

  .stat-label {
    font-size: 0.95rem;
    color: var(--text-dim);
  }

  .testimonial {
    max-width: 600px;
    margin: var(--space-2xl) auto 0;
    border-left: none;
    padding: 0;
    text-align: center;
  }

  .testimonial p {
    font-style: italic;
    font-size: 1.05rem;
    line-height: 1.7;
    color: var(--text-dim);
  }

  .testimonial cite {
    display: block;
    margin-top: var(--space-sm);
    font-size: 0.9rem;
    font-style: normal;
    color: var(--text-dim);
  }

  .results {
    margin: var(--space-3xl) 0;
    max-width: 640px;
  }

  .results h2 {
    margin-bottom: var(--space-xl);
  }

  .services {
    margin: var(--space-3xl) 0;
  }

  .services h2 {
    text-align: center;
    margin-bottom: var(--space-2xl);
  }

  .blog {
    margin: var(--space-3xl) 0;
  }

  .blog h2 {
    margin-bottom: var(--space-xl);
  }

  .blog-cta {
    text-align: center;
    margin-top: var(--space-xl);
    font-size: 1rem;
    color: var(--text-dim);
  }

  .blog-cta a {
    color: var(--accent-secondary-strong);
    font-weight: 600;
    text-decoration: underline;
  }

  .final-cta {
    padding: var(--space-3xl);
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-3xl);
    align-items: start;
    margin: var(--space-3xl) 0;
  }

  .guarantee {
    font-style: italic;
    color: var(--text-dim);
    font-size: 0.95rem;
  }

  @media (max-width: 920px) {
    .approach,
    .final-cta {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 600px) {
    .audience-list {
      flex-direction: column;
      align-items: center;
      gap: var(--space-sm);
    }
  }
</style>
